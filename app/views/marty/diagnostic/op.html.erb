<!DOCTYPE html>
<html>
  <% if cookies[:dark_mode] == 'true' %>
    <%= stylesheet_link_tag 'marty/dark_mode', media: 'all', 'data-turbolinks-track': 'reload' %>
  <% end %>

  <head>
    <!-- TODO: Rchange to `module_parent_name` once we all migrate to Rails 6-->
    <title><%= Rails.application.class.parent_name %> Diagnostic</title>
    <style type="text/css">
      body { margin: auto;
       margin-bottom: 50px;
       border: 0;
       background-color: #fff;
       color: #333333;
       font-family: Arial, Helvetica, Verdana, sans-serif;
       font-weight: normal;
       font-size: 9pt;}
      table { border: none;
        border-collapse: collapse;
        display: inline-block;
        margin: 0px 5px 0px 5px;
        text-align: left;}
      th { padding: 9px;
           border: none;
           background-color: #d6d6d6 }
      td { text-align: left;
           padding: 9px;
         }
      tr { text-align: center;}
      td.desc { font-size: 10pt;}
      td.passed { background-color: #d0e9c6 }
      td.inconsistent { background-color: #ffa500 }
      td.error  { background-color: #ff5555;
                  color: #ffffff;}
      td.overflow { max-width: 350px;
                    overflow: auto;}
      th.data { text-align: left;}
      p  { white-space: pre-line;}
      h1.application { display: block;
                       margin: 0px auto 40px auto;
                       padding: 8px;
                       background-color: #1aaa55;
                       font-size: 18pt;
                       color: #ffffff;
                       line-height: 1.5em;}
      h1.error {background-color: #ff5555;}
      h2 {text-align: center;}
      h3.error {color: red;}
      h3 {text-align: center;}
      .wrapper {
          overflow-x: auto;
          white-space: nowrap;
          display: block;}
    </style>
  </head>
  <body>
    <div style="text-align:center">
      <h1 class="application <%= 'error' unless @result['errors'].empty? %>">
        <%=
          Rails.application.config.marty.diag_title || ::Marty::RailsApp.application_name
        %> Diagnostic
      </h1>
      <h3><i><%= DateTime.now %></i></h3>
      <%== @result['display'] %>
    </div>
  </body>
</html>
